!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Sora=n()}}(function(){return function n(e,t,o){function i(s,f){if(!t[s]){if(!e[s]){var u="function"==typeof require&&require;if(!f&&u)return u(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var a=t[s]={exports:{}};e[s][0].call(a.exports,function(n){var t=e[s][1][n];return i(t?t:n)},a,a.exports,n,e,t,o)}return t[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(n,e,t){"use strict";function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function n(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),r=function(){function n(e){o(this,n),this.config=e||{}}return i(n,[{key:"connection",value:function(n){var e=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1],t=arguments.length<=2||void 0===arguments[2]?function(){}:arguments[2],o="ws://"+this.config.host+":"+this.config.port+"/"+this.config.path;return new s(o,n,e,t)}}]),n}(),s=function(){function n(e,t,i,r){o(this,n),this._ws=new WebSocket(e),this._onClose=r,this._ws.onopen=function(){t()},this._ws.onerror=function(n){i(n)},this._ws.onclose=function(n){r(n)}}return i(n,[{key:"connect",value:function(n,e,t){var o=this,i=this;this._ws.onclose=function(n){4401===n.code&&t(n.reason),o._onClose(n),i._ws=null},this._ws.onmessage=function(n){var t=JSON.parse(n.data);"offer"==t.type?e(t):"ping"==t.type&&i._ws.send(JSON.stringify({type:"pong"}))};var r=JSON.stringify({type:"connect",role:n.role,channelId:n.channelId,accessToken:n.accessToken});this._ws.send(r)}},{key:"answer",value:function(n){this._ws.send(JSON.stringify({type:"answer",sdp:n}))}},{key:"candidate",value:function(n){var e=n.toJSON();e.type="candidate",this._ws.send(JSON.stringify(e))}}]),n}();e.exports=r},{}]},{},[1])(1)});