/*!
 * sora.js
 * WebRTC SFU Sora Signaling Library
 * @version 0.1.0
 * @author Shiguredo Inc.
 * @license MIT
 */
!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Sora=n()}}(function(){return function n(e,t,o){function r(s,u){if(!t[s]){if(!e[s]){var f="function"==typeof require&&require;if(!u&&f)return f(s,!0);if(i)return i(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=t[s]={exports:{}};e[s][0].call(c.exports,function(n){var t=e[s][1][n];return r(t?t:n)},c,c.exports,n,e,t,o)}return t[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(n,e,t){"use strict";function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function n(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),i=function(){function n(e){o(this,n),this.url=e||""}return r(n,[{key:"connection",value:function(n){var e=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1],t=arguments.length<=2||void 0===arguments[2]?function(){}:arguments[2];return new s(this.url,n,e,t)}}]),n}(),s=function(){function n(e,t,r,i){o(this,n),this._ws=new WebSocket(e),this._onClose=i,this._ws.onopen=function(){t()},this._ws.onerror=function(n){r(n)},this._ws.onclose=function(n){i(n)}}return r(n,[{key:"connect",value:function(n,e,t){var o=this,r=this;this._ws.onclose=function(n){4401===n.code&&t(n.reason),o._onClose(n),r._ws=null},this._ws.onmessage=function(n){var t=JSON.parse(n.data);"offer"==t.type?e(t):"ping"==t.type&&r._ws.send(JSON.stringify({type:"pong"}))};var i=JSON.stringify({type:"connect",role:n.role,channelId:n.channelId,accessToken:n.accessToken});this._ws.send(i)}},{key:"answer",value:function(n){this._ws.send(JSON.stringify({type:"answer",sdp:n}))}},{key:"candidate",value:function(n){var e=n.toJSON();e.type="candidate",this._ws.send(JSON.stringify(e))}}]),n}();e.exports=i},{}]},{},[1])(1)});